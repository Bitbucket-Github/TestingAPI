package StepDefinition;

import org.junit.Assert;

import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;
import io.cucumber.java.en.When;
import io.restassured.RestAssured;
import io.restassured.http.Method;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;

public class GetStep {
	
	private static final String BASE_URL = "https://gorest.co.in/public-api";
	private static Response response;
	RequestSpecification httpRequest;
	int statusCode;
	
	@Given("I am a Authorized User")
	public void i_am_a_authorized_user() {
		RestAssured.baseURI = BASE_URL;
		httpRequest=RestAssured.given();
		httpRequest.auth().oauth2("243b030a622a146bf10d1fbfeae4e032cd813b50f8aa6ce074dc46504b201516");
	    //throw new io.cucumber.java.PendingException();
	}

	@When("Send GET HTTP request")
	public void send_get_http_request() {
		response=httpRequest.request(Method.GET,"/users");
	    //throw new io.cucumber.java.PendingException();
	}
	@Then("I receive valid HTTP response code")
	public void i_receive_valid_http_response_code() {
		statusCode=response.getStatusCode();
		System.out.println("Status code is: "+statusCode);
		Assert.assertEquals(statusCode, 200);
	    //throw new io.cucumber.java.PendingException();
	}
	
	@When("Send Get HTTP request for Single User")
	public void send_get_http_request_for_single_user() {
		response=httpRequest.request(Method.GET,"/users/12");
	    //throw new io.cucumber.java.PendingException();
	}
	
	@When("Send Get HTTP request for user")
	public void send_get_http_request_for_user() {
		response=httpRequest.request(Method.GET,"/users/50000");
	    //throw new io.cucumber.java.PendingException();
	}

	@Then("Verify the reponse Code")
	public void verify_the_reponse_code() {
		statusCode=response.getStatusCode();
		System.out.println("Status code is: "+statusCode);
	    //throw new io.cucumber.java.PendingException();
	}

}
